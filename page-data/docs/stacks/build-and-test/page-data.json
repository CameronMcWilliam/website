{"componentChunkName":"component---src-templates-doc-template-js","path":"/docs/stacks/build-and-test","webpackCompilationHash":"ac9462fe03c92796baef","result":{"data":{"markdownRemark":{"html":"<h1>Building and Testing Stacks</h1>\n<p>Once you have updated/created a stack, using a build.sh script wrapper you can build the specific stack images that you want to create/modify. It identifies which stacks need to be built, builds stack images and templates, generates all repo indexes and then tests the stacks and indexes locally.</p>\n<h2>Building a stack locally using build scripts</h2>\n<ol>\n<li>\n<p>Run build script and specify the stack which need to build as argument e.g.</p>\n<pre><code>  ./ci/build.sh . incubator/nodejs-express\n</code></pre>\n</li>\n<li>\n<p>Add appsody repository by running:</p>\n<pre><code>appsody repo add &#x3C;local-repo-name> file://$PWD/ci/assets/&#x3C;local-stack-repo>\n</code></pre>\n</li>\n</ol>\n<p>Note: <code>&#x3C;local-stack-repo></code> can be <code>incubator-index-local.yaml</code> or <code>experimental-index-local.yaml</code> or <code>stable-index-local.yaml</code></p>\n<p>For example:\n<code>appsody repo add my-repo file://$PWD/ci/assets/incubator-index-local.yaml</code></p>\n<p>Now that you have built the stack, you can run all the normal appsody commands on the local stack.</p>\n<h2>Building a stack image locally without build scripts</h2>\n<p>To build your stack image locally follow the below steps:</p>\n<ol>\n<li>Navigate to the <code>/image</code> directory:</li>\n<li>\n<p>Build stack image:</p>\n<pre><code>docker build -t &#x3C;org-name>/&#x3C;stack-id> -f Dockerfile-stack .\n</code></pre>\n<p>You can now have access to the stack image to use and test locally.</p>\n</li>\n</ol>\n<h3>Pointing a template to use a specific stack image</h3>\n<ol>\n<li>\n<p>Go to your appsody project directory</p>\n</li>\n<li>\n<p>Edit <code>.appsody-config.yaml</code> to use your stack:</p>\n<pre><code>stack: &#x3C;org-name>/&#x3C;stack-id>\n</code></pre>\n</li>\n<li>\n<p>Run the template with the new stack image:</p>\n<pre><code>appsody run\n</code></pre>\n</li>\n</ol>","frontmatter":{"path":"/docs/stacks/build-and-test"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"layout":"docs"}}}